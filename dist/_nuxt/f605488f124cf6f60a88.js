(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{169:function(t,n){const o={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"frontmatter-markdown"},[o("h1",[t._v("JavaScript深入之call和apply的模拟实现")]),t._v(" "),o("blockquote",[o("p",[t._v("JavaScript深入系列第十篇，通过call和apply的模拟实现，带你揭开call和apply改变this的真相")])]),t._v(" "),o("h2",[t._v("call")]),t._v(" "),o("p",[t._v("一句话介绍 call：")]),t._v(" "),o("blockquote",[o("p",[t._v("call() 方法在使用一个指定的 this 值和若干个指定的参数值的前提下调用某个函数或方法。")])]),t._v(" "),o("p",[t._v("举个例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" foo "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("foo"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n")])]),t._v(" "),o("p",[t._v("注意两点：")]),t._v(" "),o("ol",[o("li",[t._v("call 改变了 this 的指向，指向到 foo")]),t._v(" "),o("li",[t._v("bar 函数执行了")])]),t._v(" "),o("h2",[t._v("模拟实现第一步")]),t._v(" "),o("p",[t._v("那么我们该怎么模拟实现这两个效果呢？")]),t._v(" "),o("p",[t._v("试想当调用 call 的时候，把 foo 对象改造成如下：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" foo "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    "),o("span",{staticClass:"token function-variable function"},[t._v("bar")]),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\nfoo"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n")])]),t._v(" "),o("p",[t._v("这个时候 this 就指向了 foo，是不是很简单呢？")]),t._v(" "),o("p",[t._v("但是这样却给 foo 对象本身添加了一个属性，这可不行呐！")]),t._v(" "),o("p",[t._v("不过也不用担心，我们用 delete 再删除它不就好了~")]),t._v(" "),o("p",[t._v("所以我们模拟的步骤可以分为：")]),t._v(" "),o("ol",[o("li",[t._v("将函数设为对象的属性")]),t._v(" "),o("li",[t._v("执行该函数")]),t._v(" "),o("li",[t._v("删除该函数")])]),t._v(" "),o("p",[t._v("以上个例子为例，就是：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 第一步")]),t._v("\nfoo"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" bar\n"),o("span",{staticClass:"token comment"},[t._v("// 第二步")]),t._v("\nfoo"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("fn")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 第三步")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("delete")]),t._v(" foo"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn\n")])]),t._v(" "),o("p",[t._v("fn 是对象的属性名，反正最后也要删除它，所以起成什么都无所谓。")]),t._v(" "),o("p",[t._v("根据这个思路，我们可以尝试着去写第一版的 "),o("strong",[t._v("call2")]),t._v(" 函数：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 第一版")]),t._v("\n"),o("span",{staticClass:"token class-name"},[t._v("Function")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("prototype"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function-variable function"},[t._v("call2")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("context")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token comment"},[t._v("// 首先要获取调用call的函数，用this可以获取")]),t._v("\n    context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("fn")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("delete")]),t._v(" context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v("// 测试一下")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" foo "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\nbar"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call2")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("foo"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n")])]),t._v(" "),o("p",[t._v("正好可以打印 1 哎！是不是很开心！(～￣▽￣)～")]),t._v(" "),o("h2",[t._v("模拟实现第二步")]),t._v(" "),o("p",[t._v("最一开始也讲了，call 函数还能给定参数执行函数。举个例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" foo "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("name"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" age")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("name"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("age"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("foo"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("'kevin'")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("18")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// kevin")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 18")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n\n")])]),t._v(" "),o("p",[t._v("注意：传入的参数并不确定，这可咋办？")]),t._v(" "),o("p",[t._v("不急，我们可以从 Arguments 对象中取值，取出第二个到最后一个参数，然后放到一个数组里。")]),t._v(" "),o("p",[t._v("比如这样：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 以上个例子为例，此时的arguments为：")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// arguments = {")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//      0: foo,")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//      1: 'kevin',")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//      2: 18,")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//      length: 3")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// }")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 因为arguments是类数组对象，所以可以用for循环")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("for")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" len "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" arguments"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" len"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    args"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("push")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'arguments['")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("']'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v('// 执行后 args为 ["arguments[1]", "arguments[2]", "arguments[3]"]')]),t._v("\n")])]),t._v(" "),o("p",[t._v("不定长的参数问题解决了，我们接着要把这个参数数组放到要执行的函数的参数里面去。")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 将数组里的元素作为多个参数放进函数的形参里")]),t._v("\ncontext"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("fn")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("args"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("join")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("','")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// (O_o)??")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 这个方法肯定是不行的啦！！！")]),t._v("\n")])]),t._v(" "),o("p",[t._v("也许有人想到用 ES6 的方法，不过 call 是 ES3 的方法，我们为了模拟实现一个 ES3 的方法，要用到ES6的方法，好像……，嗯，也可以啦。但是我们这次用 eval 方法拼成一个函数，类似于这样：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token function"},[t._v("eval")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'context.fn('")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("+")]),o("span",{staticClass:"token string"},[t._v("')'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("这里 args 会自动调用 Array.toString() 这个方法。")]),t._v(" "),o("p",[t._v("所以我们的第二版克服了两个大问题，代码如下：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 第二版")]),t._v("\n"),o("span",{staticClass:"token class-name"},[t._v("Function")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("prototype"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function-variable function"},[t._v("call2")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("context")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("for")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" len "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" arguments"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" len"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        args"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("push")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'arguments['")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("']'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token function"},[t._v("eval")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'context.fn('")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("+")]),o("span",{staticClass:"token string"},[t._v("')'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("delete")]),t._v(" context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v("// 测试一下")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" foo "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("name"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" age")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("name"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("age"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\nbar"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call2")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("foo"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("'kevin'")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("18")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" \n"),o("span",{staticClass:"token comment"},[t._v("// kevin")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 18")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n")])]),t._v(" "),o("p",[t._v("(๑•̀ㅂ•́)و✧")]),t._v(" "),o("h2",[t._v("模拟实现第三步")]),t._v(" "),o("p",[t._v("模拟代码已经完成 80%，还有两个小点要注意：")]),t._v(" "),o("p",[o("strong",[t._v("1.this 参数可以传 null，当为 null 的时候，视为指向 window")])]),t._v(" "),o("p",[t._v("举个例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{pre:!0,attrs:{class:"language-js"}},[t._v("\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" value "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n")])]),t._v(" "),o("p",[t._v("虽然这个例子本身不使用 call，结果依然一样。")]),t._v(" "),o("p",[o("strong",[t._v("2.函数是可以有返回值的！")])]),t._v(" "),o("p",[t._v("举个例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{pre:!0,attrs:{class:"language-js"}},[t._v("\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    value"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        value"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" name"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" age\n    "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kevin'")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Object {")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    value: 1,")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    name: 'kevin',")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    age: 18")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n")])]),t._v(" "),o("p",[t._v("不过都很好解决，让我们直接看第三版也就是最后一版的代码：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 第三版")]),t._v("\n"),o("span",{staticClass:"token class-name"},[t._v("Function")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("prototype"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function-variable function"},[t._v("call2")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("context")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" context "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" context "),o("span",{staticClass:"token operator"},[t._v("||")]),t._v(" window"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("for")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" len "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" arguments"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" len"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        args"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("push")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'arguments['")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("']'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" result "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("eval")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'context.fn('")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("+")]),o("span",{staticClass:"token string"},[t._v("')'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("delete")]),t._v(" context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn\n    "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" result"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v("// 测试一下")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" value "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("2")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" obj "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("name"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" age")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        value"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("value"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        name"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" name"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n        age"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" age\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token function"},[t._v("bar")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("null")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" "),o("span",{staticClass:"token comment"},[t._v("// 2")]),t._v("\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("bar"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call2")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("'kevin'")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("18")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// 1")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Object {")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//    value: 1,")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//    name: 'kevin',")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("//    age: 18")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// }")]),t._v("\n")])]),t._v(" "),o("p",[t._v("到此，我们完成了 call 的模拟实现，给自己一个赞 ｂ（￣▽￣）ｄ")]),t._v(" "),o("h2",[t._v("apply的模拟实现")]),t._v(" "),o("p",[t._v("apply 的实现跟 call 类似，在这里直接给代码，代码来自于知乎 @郑航的实现：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token class-name"},[t._v("Function")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("prototype"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function-variable function"},[t._v("apply")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("context"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" arr")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" context "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("Object")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("context"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("||")]),t._v(" window"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" result"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token operator"},[t._v("!")]),t._v("arr"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        result "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("fn")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("else")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" len "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" arr"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" len"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            args"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("push")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'arr['")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("']'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        result "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("eval")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'context.fn('")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" args "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("')'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("delete")]),t._v(" context"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("fn\n    "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" result"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("h2",[t._v("下一篇文章")]),t._v(" "),o("p",[o("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/12",target:"_blank"}},[t._v("JavaScript深入之bind的模拟实现")])]),t._v(" "),o("h2",[t._v("重要参考")]),t._v(" "),o("p",[o("a",{attrs:{href:"https://www.zhihu.com/question/35787390",target:"_blank"}},[t._v("知乎问题 不能使用call、apply、bind，如何用 js 实现 call 或者 apply 的功能？")])]),t._v(" "),o("h2",[t._v("深入系列")]),t._v(" "),o("p",[t._v("JavaScript深入系列目录地址："),o("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog",target:"_blank"}},[t._v("https://github.com/mqyqingfeng/Blog")]),t._v("。")]),t._v(" "),o("p",[t._v("JavaScript深入系列预计写十五篇左右，旨在帮大家捋顺JavaScript底层知识，重点讲解如原型、作用域、执行上下文、变量对象、this、闭包、按值传递、call、apply、bind、new、继承等难点概念。")]),t._v(" "),o("p",[t._v("如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎star，对作者也是一种鼓励。")])])}]};t.exports={attributes:{name:"jQuery",title:"JavaScript深入之call和apply的模拟实现",time:"2020年3月2日",id:"bacon-ipsum",description:"JavaScript深入系列第十篇，通过call和apply的模拟实现，带你揭开call和apply改变this的真相"},meta:{resourcePath:"G:\\projects\\nuxt-blog\\contents\\javascript深入之call和apply的模拟实现.md"},vue:{component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=o.render,this.$options.staticRenderFns=o.staticRenderFns}}}}}}]);