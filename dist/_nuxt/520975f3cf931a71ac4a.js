(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(t,n){const o={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"frontmatter-markdown"},[o("h1",[t._v("JavaScript专题之jQuery通用遍历方法each的实现")]),t._v(" "),o("h2",[t._v("each介绍")]),t._v(" "),o("p",[t._v("jQuery 的 each 方法，作为一个通用遍历方法，可用于遍历对象和数组。")]),t._v(" "),o("p",[t._v("语法为：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[t._v("jQuery"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("object"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("callback"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("回调函数拥有两个参数：第一个为对象的成员或数组的索引，第二个为对应变量或内容。")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 遍历数组")]),t._v("\n$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),o("span",{staticClass:"token number"},[t._v("2")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" n")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('"Item #"')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('": "')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" n "),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v("// Item #0: 0")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Item #1: 1")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Item #2: 2")]),t._v("\n")])]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 遍历对象")]),t._v("\n$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" name"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('"John"')]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" lang"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('"JS"')]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" n")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v('"Name: "')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('", Value: "')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" n"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Name: name, Value: John")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Name: lang, Value: JS")]),t._v("\n")])]),t._v(" "),o("h2",[t._v("退出循环")]),t._v(" "),o("p",[t._v("尽管 ES5 提供了 forEach 方法，但是 forEach 没有办法中止或者跳出 forEach 循环，除了抛出一个异常。但是对于 jQuery 的 each 函数，如果需要退出 each 循环可使回调函数返回 false，其它返回值将被忽略。")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[t._v("$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("2")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("3")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("4")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("5")]),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" n")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i "),o("span",{staticClass:"token operator"},[t._v(">")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("2")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    console"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('"Item #"')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" "),o("span",{staticClass:"token string"},[t._v('": "')]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" n "),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n"),o("span",{staticClass:"token comment"},[t._v("// Item #0: 0")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Item #1: 1")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("// Item #2: 2")]),t._v("\n")])]),t._v(" "),o("h2",[t._v("第一版")]),t._v(" "),o("p",[t._v("那么我们该怎么实现这样一个 each 方法呢？")]),t._v(" "),o("p",[t._v("首先，我们肯定要根据参数的类型进行判断，如果是数组，就调用 for 循环，如果是对象，就使用 for in 循环，有一个例外是类数组对象，对于类数组对象，我们依然可以使用 for 循环。")]),t._v(" "),o("p",[t._v("更多关于类数组对象的知识，我们可以查看"),o("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/14",target:"_blank"}},[t._v("《JavaScript专题之类数组对象与arguments》")])]),t._v(" "),o("p",[t._v("那么又该如何判断类数组对象和数组呢？实际上，我们在"),o("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/30",target:"_blank"}},[t._v("《JavaScript专题之类型判断(下)》")]),t._v("就讲过jQuery 数组和类数组对象判断函数 isArrayLike 的实现。")]),t._v(" "),o("p",[t._v("所以，我们可以轻松写出第一版：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 第一版")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" callback")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("isArrayLike")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        length "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            "),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n        "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("else")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v(" i "),o("span",{staticClass:"token keyword"},[t._v("in")]),t._v(" obj "),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            "),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n        "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("h2",[t._v("中止循环")]),t._v(" "),o("p",[t._v("现在已经可以遍历对象和数组了，但是依然有一个效果没有实现，就是中止循环，按照 jQuery each 的实现，当回调函数返回 false 的时候，我们就中止循环。这个实现起来也很简单：")]),t._v(" "),o("p",[t._v("我们只用把：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("替换成：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("===")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("break")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("p",[t._v("轻松实现中止循环的功能。")]),t._v(" "),o("h2",[t._v("this")]),t._v(" "),o("p",[t._v("我们在实际的开发中，我们有时会在 callback 函数中用到 this，先举个不怎么恰当的例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token comment"},[t._v("// 我们给每个人添加一个 age 属性，age 的值为 18 + index")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" person "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("name"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("'kevin'")]),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("name"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token string"},[t._v("'daisy'")]),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("]")]),t._v("\n$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("person"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("index"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" item")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("age "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("18")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("+")]),t._v(" index"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("log")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("person"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("这个时候，我们就希望 this 能指向当前遍历的元素，然后给每个元素添加 age 属性。")]),t._v(" "),o("p",[t._v("指定 this，我们可以使用 call 或者 apply，其实也很简单：")]),t._v(" "),o("p",[t._v("我们把：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("===")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("break")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("p",[t._v("替换成：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("===")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("break")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("p",[t._v("关于 this，我们再举个常用的例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[t._v("$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("$")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v('"p"')]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n   "),o("span",{staticClass:"token function"},[t._v("$")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("hover")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("...")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("虽然我们经常会这样写：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token function"},[t._v("$")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v('"p"')]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token function"},[t._v("$")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("this")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("hover")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("...")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v('但是因为 $("p").each() 方法是定义在 jQuery 函数的 prototype 对象上面的，而 $.data()方法是定义 jQuery 函数上面的，调用的时候不从复杂的 jQuery 对象上调用，速度快得多。所以我们推荐使用第一种写法。')]),t._v(" "),o("p",[t._v("回到第一种写法上，就是因为将 this 指向了当前 DOM 元素，我们才能使用 $(this)将当前 DOM 元素包装成 jQuery 对象，优雅的使用 hover 方法。")]),t._v(" "),o("p",[t._v("所以最终的 each 源码为：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" callback")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("isArrayLike")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        length "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("===")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n                "),o("span",{staticClass:"token keyword"},[t._v("break")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n            "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("else")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i "),o("span",{staticClass:"token keyword"},[t._v("in")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n            "),o("span",{staticClass:"token keyword"},[t._v("if")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("===")]),t._v(" "),o("span",{staticClass:"token boolean"},[t._v("false")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n                "),o("span",{staticClass:"token keyword"},[t._v("break")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n            "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n        "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n    "),o("span",{staticClass:"token keyword"},[t._v("return")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n")])]),t._v(" "),o("h2",[t._v("性能比较")]),t._v(" "),o("p",[t._v("我们在性能上比较下 for 循环和 each 函数：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" arr "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" Array"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("from")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("length"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1000000")]),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("v"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("time")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'for'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" arr"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    i "),o("span",{staticClass:"token operator"},[t._v("+=")]),t._v(" arr"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("timeEnd")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'for'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("time")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'each'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" j "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n$"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("arr"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("index"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" item")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    j "),o("span",{staticClass:"token operator"},[t._v("+=")]),t._v(" item"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("timeEnd")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'each'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("这里显示一次运算的结果：")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/each/each1.png",alt:"性能比较"}})]),t._v(" "),o("p",[t._v("从上图可以看出，for 循环的性能是明显好于 each 函数的，each 函数本质上也是用的 for 循环，到底是慢在了哪里呢？")]),t._v(" "),o("p",[t._v("我们再看一个例子：")]),t._v(" "),o("pre",{staticClass:"language-js"},[o("code",{staticClass:"language-js"},[o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" callback")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" length "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length\n    "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        value "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("function")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("eachWithCall")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" callback")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" length "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("length\n    "),o("span",{staticClass:"token keyword"},[t._v("for")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("<")]),t._v(" length"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v(" i"),o("span",{staticClass:"token operator"},[t._v("++")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n        value "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token function"},[t._v("callback")]),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("call")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" obj"),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("i"),o("span",{staticClass:"token punctuation"},[t._v("]")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n    "),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),t._v("\n\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" arr "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" Array"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("from")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("length"),o("span",{staticClass:"token operator"},[t._v(":")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("1000000")]),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("v"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" i")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v(" "),o("span",{staticClass:"token operator"},[t._v("=>")]),t._v(" i"),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("time")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'each'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" i "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token function"},[t._v("each")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("arr"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("index"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" item")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    i "),o("span",{staticClass:"token operator"},[t._v("+=")]),t._v(" item"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("timeEnd")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'each'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n\n\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("time")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'eachWithCall'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n"),o("span",{staticClass:"token keyword"},[t._v("var")]),t._v(" j "),o("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),o("span",{staticClass:"token number"},[t._v("0")]),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token function"},[t._v("eachWithCall")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("arr"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),o("span",{staticClass:"token keyword"},[t._v("function")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token parameter"},[t._v("index"),o("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" item")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),o("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("\n    j "),o("span",{staticClass:"token operator"},[t._v("+=")]),t._v(" item"),o("span",{staticClass:"token punctuation"},[t._v(";")]),t._v("\n"),o("span",{staticClass:"token punctuation"},[t._v("}")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\nconsole"),o("span",{staticClass:"token punctuation"},[t._v(".")]),o("span",{staticClass:"token function"},[t._v("timeEnd")]),o("span",{staticClass:"token punctuation"},[t._v("(")]),o("span",{staticClass:"token string"},[t._v("'eachWithCall'")]),o("span",{staticClass:"token punctuation"},[t._v(")")]),t._v("\n")])]),t._v(" "),o("p",[t._v("这里显示一次运算的结果：")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://github.com/mqyqingfeng/Blog/raw/master/Images/each/each2.png",alt:"性能比较"}})]),t._v(" "),o("p",[t._v("each 函数和 eachWithCall 函数唯一的区别就是 eachWithCall 调用了 call，从结果我们可以推测出，call 会导致性能损失，但也正是 call 的存在，我们才能将 this 指向循环中当前的元素。")]),t._v(" "),o("p",[t._v("有舍有得吧。")]),t._v(" "),o("h2",[t._v("专题系列")]),t._v(" "),o("p",[t._v("JavaScript专题系列目录地址："),o("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog",target:"_blank"}},[t._v("https://github.com/mqyqingfeng/Blog")]),t._v("。")]),t._v(" "),o("p",[t._v("JavaScript专题系列预计写二十篇左右，主要研究日常开发中一些功能点的实现，比如防抖、节流、去重、类型判断、拷贝、最值、扁平、柯里、递归、乱序、排序等，特点是研(chao)究(xi) underscore 和 jQuery 的实现方式。")]),t._v(" "),o("p",[t._v("如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎 star，对作者也是一种鼓励。")])])}]};t.exports={attributes:{name:"jQuery",title:"JavaScript专题之jQuery通用遍历方法each的实现",time:"2020年3月2日",id:"bacon-ipsum",description:"jQuery 的 each 方法，作为一个通用遍历方法，可用于遍历对象和数组。"},meta:{resourcePath:"G:\\projects\\nuxt-blog\\contents\\javascript专题之jquery通用遍历方法each的实现.md"},vue:{component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=o.render,this.$options.staticRenderFns=o.staticRenderFns}}}}}}]);